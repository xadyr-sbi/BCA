<!DOCTYPE html>
<html>
<head>
  <title>Kirim Lokasi</title>
</head>
<body>
  <h2>Kirim Lokasi</h2>
  <button onclick="kirimLokasi()">Kirim Sekarang</button>

  <script>
    async function kirimLokasi() {
      try {
        // ambil lokasi user
        navigator.geolocation.getCurrentPosition(async (pos) => {
          const data = {
            ip: await ambilIP(),
            lokasi: `${pos.coords.latitude},${pos.coords.longitude}`,
            nama: "Tes Nama",
            kota: "Tes Kota",
            fotoBase64: "" // bisa diisi jika nanti upload foto
          };

          const response = await fetch(
            "https://script.google.com/macros/s/AKfycbz7LnJeVFd1-HGCIEF2cEULDR1RQ40F_u5YXu4sBzEHQMGpp7HAL9M4etNhf-LA22go/exec",
            {
              method: "POST",
              body: JSON.stringify(data)
            }
          );

          const result = await response.json();
          alert("Status: " + result.status);
        });
      } catch (e) {
        alert("Gagal ambil lokasi: " + e);
      }
    }

    async function ambilIP() {
      const res = await fetch("https://api.ipify.org?format=json");
      const json = await res.json();
      return json.ip;
    }
  </script>
</body>
</html>
